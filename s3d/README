This is for S3D trunk R831 (current development version as of 15Oct09); some of the post-processing sources are not include so some of the cmake options related to analysis are not available. 

BUILDING
--------

This version of s3d uses CMake (www.cmake.org) to configure the build. 

Compile time options include, in particular, the chemical mechanism.

CMake is setup for out of source builds, and the provided scripts will find needed libraries on the ORNL LCF (jaguar, jaguarpf) and some local SNL resources. For building elsewhere you may need to provide paths to optional libraries by hand if you want to use them.

To use the optional IO methods (hdf5/pnetcdf/mpi-io/adios), use ccmake to enable the options:
ADIOS
MPIIO

Make sure the library / include paths are set correctly:
for adios:
ADIOSREAD_INCLUDE_PATH
ADIOSREAD_LIB
ADIOS_INCLUDE_PATH
ADIOS_LIB
XML_LIB (needs to point to libmxml.a)

for mpi-io:
MPIIO_LIB (romio library)

On jaguar/jaguar pf these will be autodectected provided the 'adios' module is loaded.

The chemical mechanism is selected by setting the MECHANISM via ccmake. Available options are:
C2H4             C7H16_53species  C7H16_88species    CH4_partprmx  CO-H2
C2H4_tj          C7H16_58species  CH3OCH3_30species  CH4_prmx      H2
C7H16_52species  C7H16_77species  CH3OCH3_31species  CH4_strat

C2H4 is for ethylene chemistry, C7H16_58species is represenative of a more complicated mechanism. Turn on USE_ACML to use the version of the chemistry optmized to use the amd core math library for vectorized exponential evaluation as in production S3D runs (not available for all mechanisms). Otherwise the default options should be fine.

The install prefix can also be set at this time.

N.B. Some of the chemical mechanisms, especially the vector versions, are quite large and can take soe time to compile with aggressive optimization.



INSTALLING
----------

After building, run
make install

to copy the executable and sample input files for the chemical mechanism selected through ccmake to the install directory - the default is ../s3d_run


RUNNING
-------

The run is the launched from ../s3d_run/run

The input files are in ../s3d_run/input - alter s3d.in to change the nubmer of processes (same as before). There are sample files for a variety of processor counts in s3d.in.${NUM_PES}.

The last line chooses the IO method - use 0 for 1 file per process, 1 for MPI-IO, 5 for ADIOS


Any questions should be directed to jhchen@sandia.gov or rwgrout@sandia.gov
