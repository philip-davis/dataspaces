SHELL   = /bin/sh
CC = cc 
FTN = ftn
DSPACES_DIR = /ccs/home/zhangfan/dataspaces-hybrid-staging
INCLUDES=-I. \
		-I$(DSPACES_DIR) \
		-I$(DSPACES_DIR)/include \
		-I$(DSPACES_DIR)/dart \
		-I$(DSPACES_DIR)/dart/gni \
        -I/opt/cray/rca/default/include \
        -I/opt/cray-hss-devel/6.0.0/include     \
        -I/opt/cray/krca/1.0.0-2.0400.29855.4.28.gem/include

PMI_CFLAGS = $(shell pkg-config --cflags cray-pmi)
PMI_LIBS = $(shell pkg-config --libs cray-pmi)
UGNI_CFLAGS = $(shell pkg-config --cflags cray-ugni)
UGNI_LIBS = $(shell pkg-config --libs cray-ugni)
LIBS=${PMI_LIBS} ${UGNI_LIBS} \
        -L/opt/cray/rca/default/lib64 -lrca

CFLAGS= -g ${UGNI_CFLAGS} ${PMI_CLFASG} -DDS_HAVE_HYBRID_STAGING

SRC1 =  hybrid_staging_api.c \
		hstaging_scheduler_serial_job.c \
		hstaging_scheduler_parallel_job.c 

OBJ1 = $(SRC1:.c=.o)

OUT1 = ./libhstaging.a

default: $(OUT1)

.c.o:
	$(CC) $(INCLUDES) $(CFLAGS) -c $< -o $@

$(OUT1): $(OBJ1)
	ar rcs $(OUT1) $(OBJ1)

clean:
	rm -f $(OUT1) $(OBJ1) 

